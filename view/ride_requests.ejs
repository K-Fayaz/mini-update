<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Your Requests</title>

  <!-- CSS files -->
  <link rel="stylesheet" href="/CSS/index.css">
  <link rel="stylesheet" href="/CSS/nav.css">
  <link rel="stylesheet" href="/CSS/account.css">
  <link rel="stylesheet" href="/CSS/request_rides_account.css">


  <!-- Javascript files are here -->
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  <script src="/JS/request_manage.js" defer charset="utf-8" ></script>

</head>
<body>
  <%- include('./partials/navbar.ejs') %>

  <div class="grid-container">
    <%- include('./partials/sidebar.ejs') %>
    <div class="dashboard-data">
      <% if(!user.requests.length){ %>
        <h1 style="margin: 10px;">You dont have any requests</h1>
      <% } else{ %>
        <% for(let req of user.requests){ %>

          <div class="request" id="request_<%= req.id %>">
            <div class="request-maker-info">
              <div>
                <div><%= req.from.username[0] %></div>
                <h3 id="request-user-<%= req.id %>"><%= req.from.username %></h3>
              </div>
              <h4 id="request-email-<%= req.id %>"><%= req.from.email %></h4>
            </div>
            <div class="ride-info">
              <div class="ride-path">
                <h5>From : <%= req.ride.from %></h5>
                <h5>To: <%= req.ride.to %></h5>
              </div>
              <div class="ride-timings">
                <p><b>On :</b> <%= req.ride.date %></p>
                <p><b>at :</b> <%= req.ride.time %></p>
                <p><b>price:</b> <%= req.ride.price %> Rs</p>
              </div>
            </div>
            <div class="request-manage-btns">
              <button onclick="manageRequest(event)" id="accept_<%= req._id %>" class="accept-request">Accept</button>
              <button onclick="manageRequest(event)" id="reject_<%= req._id %>" class="reject-request">Reject</button>
            </div>
          </div>
        <% } %>
      <% } %>
    </div>
  </div>
</body>
</html>
